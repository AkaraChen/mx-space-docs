import{_ as s,c as a,o as n,a as l}from"./app.01778176.js";const C='{"title":"\u4E91\u51FD\u6570\u4F7F\u7528\u65B9\u6CD5","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u524D\u8A00","slug":"\u524D\u8A00"},{"level":2,"title":"\u5B89\u88C5\u5E93","slug":"\u5B89\u88C5\u5E93"},{"level":2,"title":"\u529F\u80FD","slug":"\u529F\u80FD"},{"level":3,"title":"\u6B4C\u5355\uFF08\u7F51\u6613\u4E91\uFF09","slug":"\u6B4C\u5355\uFF08\u7F51\u6613\u4E91\uFF09"},{"level":3,"title":"\u8FFD\u756A","slug":"\u8FFD\u756A"},{"level":3,"title":"\u80CC\u666F\u97F3\u4E50","slug":"\u80CC\u666F\u97F3\u4E50"},{"level":2,"title":"\u6D4B\u8BD5","slug":"\u6D4B\u8BD5"},{"level":3,"title":"netease \u51FD\u6570","slug":"netease-\u51FD\u6570"},{"level":3,"title":"song \u51FD\u6570","slug":"song-\u51FD\u6570"},{"level":3,"title":"bangumi \u51FD\u6570","slug":"bangumi-\u51FD\u6570"},{"level":2,"title":"\u7ED3\u675F","slug":"\u7ED3\u675F"}],"relativePath":"options/serverless.md"}',p={},o=l(`<h1 id="\u4E91\u51FD\u6570\u4F7F\u7528\u65B9\u6CD5" tabindex="-1">\u4E91\u51FD\u6570\u4F7F\u7528\u65B9\u6CD5 <a class="header-anchor" href="#\u4E91\u51FD\u6570\u4F7F\u7528\u65B9\u6CD5" aria-hidden="true">#</a></h1><blockquote><p>\u5728 kami 3.5.0 \u7248\u672C\u53CA\u4EE5\u4E0A\uFF0C\u8BE5\u8282\u5185\u5BB9\u662F\u5FC5\u987B\u7684\u3002</p></blockquote><h2 id="\u524D\u8A00" tabindex="-1">\u524D\u8A00 <a class="header-anchor" href="#\u524D\u8A00" aria-hidden="true">#</a></h2><p>Mix-space \u7684\u4E91\u51FD\u6570\u5B9E\u73B0\u4F9D\u8D56\u4E8E\u52A8\u6001\u7684\u8DEF\u7531\u5904\u7406\u6A21\u5757\uFF0C\u901A\u8FC7\u4E91\u51FD\u6570\u53EF\u4EE5\u7F16\u5199\u4E00\u4E9B\u7B80\u5355\u7684 API\u3002</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>\u2757 \u6CE8\u610F\uFF1A\u7B2C\u4E09\u65B9\u5E93\u7684\u4F7F\u7528\u662F\u6709\u9650\u5236\u7684\uFF1B\u7B2C\u4E00\u4F60\u9700\u8981\u5148\u5B89\u88C5\u4E86\u8FD9\u4E2A\u5E93\uFF1B\u7B2C\u4E8C\u662F\u53EA\u6709\u53D7\u4FE1\u4EFB\u7684\u7B2C\u4E09\u65B9\u5E93\u548C\u67D0\u4E9B\u7CFB\u7EDF\u6A21\u5757\u53EF\u4EE5\u4F7F\u7528</p></div><p>\u5177\u4F53\u4FE1\u606F\u53EF\u4EE5\u53C2\u9605 <a href="https://github.com/mx-space/mx-server/blob/master/src/modules/serverless/serverless.readme.md" target="_blank" rel="noopener noreferrer">Severless.Readme</a></p><h2 id="\u5B89\u88C5\u5E93" tabindex="-1">\u5B89\u88C5\u5E93 <a class="header-anchor" href="#\u5B89\u88C5\u5E93" aria-hidden="true">#</a></h2><p>\u8FDB\u5165\u540E\u53F0\uFF0C\u79FB\u52A8\u5230 <code>\u5176\u4ED6 \xB7 \u7EC8\u7AEF</code></p><p>\u5982\u679C\u6CA1\u6709\u5F00\u542F\uFF0C\u8BF7\u81EA\u884C\u5230 \u8BBE\u5B9A\u2014\u7CFB\u7EDF\u2014\u7EC8\u7AEF\u8BBE\u5B9A \u91CC\u9762\u5F00\u542F\u7EC8\u7AEF\uFF1B\u51FA\u4E8E\u5B89\u5168\u8003\u8651\uFF0C\u8BF7\u4F7F\u7528\u5B8C\u5173\u95ED\u7EC8\u7AEF\u529F\u80FD\u5F00\u5173\u3002 <img src="https://cdn.jsdelivr.net/gh/mx-space/docs-images@latest/images/admin-webshell.png" alt=""> \u8FDB\u5165\u7EC8\u7AEF\uFF0C\u6267\u884C\u547D\u4EE4</p><div class="language-bash"><pre class="shiki shiki-dark" style="background-color:#121212;"><code><span class="line"><span style="color:#758575;"># \u68C0\u67E5npm\u662F\u5426\u5B58\u5728</span></span>
<span class="line"><span style="color:#DBD7CA;">npm -v</span></span>
<span class="line"><span style="color:#758575;"># \u5982\u679C\u7F3A\u5931npm \u8BF7\u5148\u4F7F\u7528\u5BB9\u5668\u5185\u5DF2\u5B58\u5728\u7684\u7BA1\u7406\u5668\u5B89\u88C5 npm\uFF0C\u4F8B\u5982 apk\uFF0Cyarn\u3002</span></span>
<span class="line"><span style="color:#DBD7CA;">apk add npm</span></span>
<span class="line"><span style="color:#758575;"># \uFF08\u53EF\u9009\uFF09 yarn global add npm</span></span>
<span class="line"><span style="color:#758575;"># \u5B89\u88C5\u5FC5\u987B\u5E93</span></span>
<span class="line"><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">cd</span><span style="color:#DBD7CA;"> /app</span></span>
<span class="line"><span style="color:#DBD7CA;"> npm install @mx-space/extra</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#A0ADA0;"># \u68C0\u67E5npm\u662F\u5426\u5B58\u5728</span></span>
<span class="line"><span style="color:#393A34;">npm -v</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u5982\u679C\u7F3A\u5931npm \u8BF7\u5148\u4F7F\u7528\u5BB9\u5668\u5185\u5DF2\u5B58\u5728\u7684\u7BA1\u7406\u5668\u5B89\u88C5 npm\uFF0C\u4F8B\u5982 apk\uFF0Cyarn\u3002</span></span>
<span class="line"><span style="color:#393A34;">apk add npm</span></span>
<span class="line"><span style="color:#A0ADA0;"># \uFF08\u53EF\u9009\uFF09 yarn global add npm</span></span>
<span class="line"><span style="color:#A0ADA0;"># \u5B89\u88C5\u5FC5\u987B\u5E93</span></span>
<span class="line"><span style="color:#393A34;"> </span><span style="color:#B58451;">cd</span><span style="color:#393A34;"> /app</span></span>
<span class="line"><span style="color:#393A34;"> npm install @mx-space/extra</span></span>
<span class="line"></span></code></pre></div><p>\u9000\u51FA\u540E\u53F0\u7684\u7EC8\u7AEF\uFF08webshell\uFF09\uFF0C\u5E76\u5173\u95ED\u8BE5\u529F\u80FD\u5F00\u5173\uFF08\u5EFA\u8BAE\uFF09\u3002</p><h2 id="\u529F\u80FD" tabindex="-1">\u529F\u80FD <a class="header-anchor" href="#\u529F\u80FD" aria-hidden="true">#</a></h2><h3 id="\u6B4C\u5355\uFF08\u7F51\u6613\u4E91\uFF09" tabindex="-1">\u6B4C\u5355\uFF08\u7F51\u6613\u4E91\uFF09 <a class="header-anchor" href="#\u6B4C\u5355\uFF08\u7F51\u6613\u4E91\uFF09" aria-hidden="true">#</a></h3><p>\u8FDB\u5165\u540E\u53F0\uFF0C\u79FB\u52A8\u5230 <code>\u5176\u4ED6 \xB7 \u914D\u7F6E\u4E0E\u4E91\u51FD\u6570</code></p><p>\u65B0\u5EFA\u4E00\u4E2A\u9879</p><ul><li>\u540D\u5B57\uFF1A<code>netease</code></li><li>\u5F15\u7528\uFF1A<code>kami</code></li><li>\u5143\u7C7B\u578B\uFF1A<code>kami</code></li><li>\u6570\u636E\u7C7B\u578B\uFF1A<code>Function</code></li><li>\u516C\u5F00\uFF1A <code>\u662F</code></li></ul><p>\u5185\u5BB9\u793A\u4F8B\u5982\u4E0B\uFF0C\u8BF7\u53C2\u7167\u81EA\u5DF1\u7684\u60C5\u51B5\u8FDB\u884C\u4FEE\u6539</p><div class="language-typescript"><pre class="shiki shiki-dark" style="background-color:#121212;"><code><span class="line"><span style="color:#CB7676;">async</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">function</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">handler</span><span style="color:#858585;">(</span><span style="color:#B8A965;">ctx</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">require</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">extra</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">require</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">&quot;@mx-space/extra&quot;</span><span style="color:#858585;">);</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">NeteaseMusic</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">extra</span><span style="color:#858585;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">client</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">NeteaseMusic</span><span style="color:#858585;">(</span><span style="color:#B8A965;">phone</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">password</span><span style="color:#858585;">);</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">client</span><span style="color:#858585;">.</span><span style="color:#A1B567;">Login</span><span style="color:#858585;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">weekdata</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">client</span><span style="color:#858585;">.</span><span style="color:#A1B567;">getWeekData</span><span style="color:#858585;">();</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">alldata</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">client</span><span style="color:#858585;">.</span><span style="color:#A1B567;">getAllData</span><span style="color:#858585;">();</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">playlist</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">client</span><span style="color:#858585;">.</span><span style="color:#A1B567;">getFavorite</span><span style="color:#858585;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">responsePayload</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#B8A965;">playlist</span><span style="color:#858585;">,</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#B8A965;">weekdata</span><span style="color:#858585;">,</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#B8A965;">alldata</span><span style="color:#858585;">,</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">responsePayload</span><span style="color:#858585;">;</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">phone</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;155555*****&quot;</span><span style="color:#858585;">;</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">password</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;66666****&quot;</span><span style="color:#858585;">;</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#AB5959;">async</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">handler</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">ctx</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">require</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">extra</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">await</span><span style="color:#393A34;"> </span><span style="color:#B58451;">require</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;@mx-space/extra&quot;</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">NeteaseMusic</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">extra</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">client</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">NeteaseMusic</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">phone</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">password</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">await</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">client</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">Login</span><span style="color:#8E8F8B;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">weekdata</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">await</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">client</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">getWeekData</span><span style="color:#8E8F8B;">();</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">alldata</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">await</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">client</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">getAllData</span><span style="color:#8E8F8B;">();</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">playlist</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">await</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">client</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">getFavorite</span><span style="color:#8E8F8B;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">responsePayload</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8C862B;">playlist</span><span style="color:#8E8F8B;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8C862B;">weekdata</span><span style="color:#8E8F8B;">,</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#8C862B;">alldata</span><span style="color:#8E8F8B;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">responsePayload</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">phone</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;155555*****&quot;</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">password</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;66666****&quot;</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"></span></code></pre></div><p>\u6CE8\u610F\uFF1A\u793A\u4F8B\u4E2D\u7684 <code>phone</code> \u548C <code>password</code> \u9700\u8981\u66FF\u6362\u6210\u81EA\u5DF1\u7684\uFF0C\u5176\u4ED6\u7684\u590D\u5236\u8FC7\u53BB\u5C31\u884C\u3002</p><h3 id="\u8FFD\u756A" tabindex="-1">\u8FFD\u756A <a class="header-anchor" href="#\u8FFD\u756A" aria-hidden="true">#</a></h3><p>\u65B0\u5EFA\u4E00\u4E2A\u9879</p><ul><li>\u540D\u5B57\uFF1A<code>bangumi</code></li><li>\u5F15\u7528\uFF1A<code>kami</code></li><li>\u5143\u7C7B\u578B\uFF1A<code>kami</code></li><li>\u6570\u636E\u7C7B\u578B\uFF1A<code>Function</code></li><li>\u516C\u5F00\uFF1A <code>\u662F</code></li></ul><p>\u793A\u4F8B\u5982\u4E0B\uFF1A</p><div class="language-typescript"><pre class="shiki shiki-dark" style="background-color:#121212;"><code><span class="line"><span style="color:#CB7676;">async</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">function</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">handler</span><span style="color:#858585;">()</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">extra</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">require</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">&quot;@mx-space/extra&quot;</span><span style="color:#858585;">);</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">BiliClient</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">extra</span><span style="color:#858585;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">bl</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">context</span><span style="color:#858585;">.</span><span style="color:#A1B567;">getMaster</span><span style="color:#858585;">().</span><span style="color:#A1B567;">then</span><span style="color:#858585;">((</span><span style="color:#B8A965;">user</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=&gt;</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">user</span><span style="color:#858585;">.</span><span style="color:#B8A965;">socialIds</span><span style="color:#858585;">.</span><span style="color:#B8A965;">bilibili</span><span style="color:#858585;">);</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">client</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">new</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">BiliClient</span><span style="color:#858585;">(</span><span style="color:#E0A569;">parseInt</span><span style="color:#858585;">(</span><span style="color:#B8A965;">bl</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">||</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">uid</span><span style="color:#858585;">));</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">bangumi</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">client</span><span style="color:#858585;">.</span><span style="color:#A1B567;">getFavoriteBangumi</span><span style="color:#858585;">(</span><span style="color:#E0A569;">parseInt</span><span style="color:#858585;">(</span><span style="color:#B8A965;">len</span><span style="color:#858585;">));</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">bangumi</span><span style="color:#858585;">;</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">uid</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">121212</span><span style="color:#858585;">;</span></span>
<span class="line"><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">len</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#6394BF;">10</span><span style="color:#858585;">;</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#AB5959;">async</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">handler</span><span style="color:#8E8F8B;">()</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">extra</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">await</span><span style="color:#393A34;"> </span><span style="color:#B58451;">require</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;@mx-space/extra&quot;</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">BiliClient</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">extra</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">bl</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">await</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">context</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">getMaster</span><span style="color:#8E8F8B;">().</span><span style="color:#6C7834;">then</span><span style="color:#8E8F8B;">((</span><span style="color:#8C862B;">user</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=&gt;</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">user</span><span style="color:#8E8F8B;">.</span><span style="color:#8C862B;">socialIds</span><span style="color:#8E8F8B;">.</span><span style="color:#8C862B;">bilibili</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">client</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">new</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">BiliClient</span><span style="color:#8E8F8B;">(</span><span style="color:#B58451;">parseInt</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">bl</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">||</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">uid</span><span style="color:#8E8F8B;">));</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">bangumi</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">await</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">client</span><span style="color:#8E8F8B;">.</span><span style="color:#6C7834;">getFavoriteBangumi</span><span style="color:#8E8F8B;">(</span><span style="color:#B58451;">parseInt</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">len</span><span style="color:#8E8F8B;">));</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">bangumi</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">uid</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">121212</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">len</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#296AA3;">10</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"></span></code></pre></div><p>\u6CE8\u610F\uFF1A<code>uid</code> \u662F\u81EA\u5DF1\u7684 \u54D4\u54E9\u54D4\u54E9 ID\uFF0C<code>len</code> \u662F\u5141\u8BB8\u83B7\u53D6\u81EA\u5DF1\u770B\u8FC7\u7684\u756A\u7684\u6700\u5927\u4E2A\u6570\uFF0C\u5B9E\u9645\u5C55\u793A\u4E2A\u6570\u53D7\u9650\u4E8E\u5B9E\u9645\u7684\u8FFD\u756A\u6570\u3002</p><h3 id="\u80CC\u666F\u97F3\u4E50" tabindex="-1">\u80CC\u666F\u97F3\u4E50 <a class="header-anchor" href="#\u80CC\u666F\u97F3\u4E50" aria-hidden="true">#</a></h3><p>\u65B0\u5EFA\u4E00\u4E2A\u9879</p><ul><li><p>\u540D\u5B57\uFF1A<code>song</code></p></li><li><p>\u5F15\u7528\uFF1A<code>kami</code></p></li><li><p>\u5143\u7C7B\u578B\uFF1A<code>kami</code></p></li><li><p>\u6570\u636E\u7C7B\u578B\uFF1A<code>Function</code></p></li><li><p>\u516C\u5F00\uFF1A <code>\u662F</code></p></li></ul><p>\u793A\u4F8B\u5982\u4E0B\uFF1A</p><div class="language-typescript"><pre class="shiki shiki-dark" style="background-color:#121212;"><code><span class="line"><span style="color:#CB7676;">async</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">function</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">handler</span><span style="color:#858585;">(</span><span style="color:#B8A965;">ctx</span><span style="color:#858585;">,</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">require</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">NeteaseCloudMusicApi</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">require</span><span style="color:#858585;">(</span><span style="color:#C98A7D;">&quot;@mx-space/extra&quot;</span><span style="color:#858585;">);</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">song_url</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">}</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">NeteaseCloudMusicApi</span><span style="color:#858585;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">id</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">ctx</span><span style="color:#858585;">.</span><span style="color:#B8A965;">req</span><span style="color:#858585;">.</span><span style="color:#B8A965;">query</span><span style="color:#858585;">.</span><span style="color:#B8A965;">id</span><span style="color:#858585;">;</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#4D9375;">if</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">(</span><span style="color:#CB7676;">!</span><span style="color:#B8A965;">id</span><span style="color:#858585;">)</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">{</span><span style="color:#DBD7CA;"> </span><span style="color:#E0A569;">message</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#C98A7D;">&quot;id must be not empty stringnumber&quot;</span><span style="color:#DBD7CA;"> </span><span style="color:#858585;">};</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">}</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#CB7676;">const</span><span style="color:#DBD7CA;"> </span><span style="color:#D4976C;">data</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">=</span><span style="color:#DBD7CA;"> </span><span style="color:#4D9375;">await</span><span style="color:#DBD7CA;"> </span><span style="color:#A1B567;">song_url</span><span style="color:#858585;">({</span></span>
<span class="line"><span style="color:#DBD7CA;">    </span><span style="color:#E0A569;">id</span><span style="color:#858585;">:</span><span style="color:#DBD7CA;"> </span><span style="color:#CB7676;">+</span><span style="color:#B8A965;">id</span><span style="color:#858585;">,</span></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#858585;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#DBD7CA;">  </span><span style="color:#4D9375;">return</span><span style="color:#DBD7CA;"> </span><span style="color:#B8A965;">data</span><span style="color:#858585;">.</span><span style="color:#B8A965;">body</span><span style="color:#858585;">.</span><span style="color:#B8A965;">data</span><span style="color:#858585;">;</span></span>
<span class="line"><span style="color:#858585;">}</span></span>
<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#AB5959;">async</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">function</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">handler</span><span style="color:#8E8F8B;">(</span><span style="color:#8C862B;">ctx</span><span style="color:#8E8F8B;">,</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">require</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">NeteaseCloudMusicApi</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">await</span><span style="color:#393A34;"> </span><span style="color:#B58451;">require</span><span style="color:#8E8F8B;">(</span><span style="color:#B56959;">&quot;@mx-space/extra&quot;</span><span style="color:#8E8F8B;">);</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">song_url</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">}</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">NeteaseCloudMusicApi</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">id</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">ctx</span><span style="color:#8E8F8B;">.</span><span style="color:#8C862B;">req</span><span style="color:#8E8F8B;">.</span><span style="color:#8C862B;">query</span><span style="color:#8E8F8B;">.</span><span style="color:#8C862B;">id</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">if</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">(</span><span style="color:#AB5959;">!</span><span style="color:#8C862B;">id</span><span style="color:#8E8F8B;">)</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">{</span><span style="color:#393A34;"> </span><span style="color:#B58451;">message</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#B56959;">&quot;id must be not empty stringnumber&quot;</span><span style="color:#393A34;"> </span><span style="color:#8E8F8B;">};</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">}</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#AB5959;">const</span><span style="color:#393A34;"> </span><span style="color:#A65E2B;">data</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">=</span><span style="color:#393A34;"> </span><span style="color:#1C6B48;">await</span><span style="color:#393A34;"> </span><span style="color:#6C7834;">song_url</span><span style="color:#8E8F8B;">({</span></span>
<span class="line"><span style="color:#393A34;">    </span><span style="color:#B58451;">id</span><span style="color:#8E8F8B;">:</span><span style="color:#393A34;"> </span><span style="color:#AB5959;">+</span><span style="color:#8C862B;">id</span><span style="color:#8E8F8B;">,</span></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#8E8F8B;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#393A34;">  </span><span style="color:#1C6B48;">return</span><span style="color:#393A34;"> </span><span style="color:#8C862B;">data</span><span style="color:#8E8F8B;">.</span><span style="color:#8C862B;">body</span><span style="color:#8E8F8B;">.</span><span style="color:#8C862B;">data</span><span style="color:#8E8F8B;">;</span></span>
<span class="line"><span style="color:#8E8F8B;">}</span></span>
<span class="line"></span></code></pre></div><p>\u6CE8\u610F\uFF1A\u80CC\u666F\u97F3\u4E50\u7684\u6B4C\u5355\u4F9D\u8D56\u4E8E kami v3 \u90A3\u8282\u4E2D\u8BBE\u7F6E\u7684\u7F51\u6613\u4E91\u6B4C\u66F2 ID\uFF1B\u82E5\u6CA1\u6709\u8BBE\u7F6E\uFF0C\u5219\u4F7F\u7528\u9ED8\u8BA4\u7684\u3002</p><p>\u5230\u8FD9\u91CC\uFF0CKami \u9ED8\u8BA4\u529F\u80FD\u9700\u8981\u7684\u4E91\u51FD\u6570\u5DF2\u7ECF\u914D\u7F6E\u5B8C\u6BD5\u3002</p><h2 id="\u6D4B\u8BD5" tabindex="-1">\u6D4B\u8BD5 <a class="header-anchor" href="#\u6D4B\u8BD5" aria-hidden="true">#</a></h2><p>\u4EE5 <code>server.test.cn</code> \u4E3A\u4F8B</p><h3 id="netease-\u51FD\u6570" tabindex="-1">netease \u51FD\u6570 <a class="header-anchor" href="#netease-\u51FD\u6570" aria-hidden="true">#</a></h3><p>\u6253\u5F00\u6D4F\u89C8\u5668\uFF0C\u8BBF\u95EE <a href="https://server.test.cn/api/v2/serverless/kami/netease" target="_blank" rel="noopener noreferrer">https://server.test.cn/api/v2/serverless/kami/netease</a></p><p>\u72B6\u6001\u7801 \u8FD4\u56DE 200 \uFF0C\u4E14\u6709\u6B63\u5E38\u6570\u636E\u51FA\u73B0\u3002</p><p>\u793A\u4F8B\u5982\u4E0B\uFF1A</p><p><img src="https://cdn.jsdelivr.net/gh/mx-space/docs-images@latest/images/api-return.png" alt=""></p><h3 id="song-\u51FD\u6570" tabindex="-1">song \u51FD\u6570 <a class="header-anchor" href="#song-\u51FD\u6570" aria-hidden="true">#</a></h3><p>\u8BBF\u95EE <a href="https://server.test.cn/api/v2/serverless/kami/song?id=95438221" target="_blank" rel="noopener noreferrer">https://server.test.cn/api/v2/serverless/kami/song?id=95438221</a></p><p>\u72B6\u6001\u7801 \u8FD4\u56DE 200 \uFF0C\u4E14\u8FD4\u56DE\u8BE5\u6B4C\u66F2\u7684\u6570\u636E</p><h3 id="bangumi-\u51FD\u6570" tabindex="-1">bangumi \u51FD\u6570 <a class="header-anchor" href="#bangumi-\u51FD\u6570" aria-hidden="true">#</a></h3><p>\u8BBF\u95EE <a href="https://server.test.cn/api/v2/serverless/kami/bangumi" target="_blank" rel="noopener noreferrer">https://server.test.cn/api/v2/serverless/kami/bangumi</a></p><p>\u72B6\u6001\u7801 \u8FD4\u56DE 200\uFF0C\u4E14\u8FD4\u56DE\u4F60\u81EA\u5DF1\u7684\u8FFD\u756A\u6570\u636E</p><h2 id="\u7ED3\u675F" tabindex="-1">\u7ED3\u675F <a class="header-anchor" href="#\u7ED3\u675F" aria-hidden="true">#</a></h2><p>\u5982\u679C\u6D4B\u8BD5\u90FD\u6CA1\u95EE\u9898\uFF0C\u53EF\u4EE5\u6109\u5FEB\u7684\u5347\u7EA7 Kami 3.5.0 \u7248\u672C\u53CA\u4EE5\u4E0A\u4E86\uFF0C\u800C\u4E14\u636E\u4F5C\u8005\u4ECB\u7ECD\uFF0C\u53EF\u4EE5\u901A\u8FC7\u8FD9\u4E2A\u81EA\u5DF1 DIY \u4E00\u4E9B\u529F\u80FD\uFF0C\u671F\u5F85\u5404\u4F4D\u5927\u4F6C\u7684 PR\u3002</p>`,47),e=[o];function c(t,r,y,B,A,i){return n(),a("div",null,e)}var d=s(p,[["render",c]]);export{C as __pageData,d as default};
