import{_ as s,c as a,o as n,a as l}from"./app.3b7d96fb.js";const e='{"title":"一键式部署","description":"","frontmatter":{},"headers":[{"level":2,"title":"准备","slug":"准备"},{"level":2,"title":"zx安装","slug":"zx安装"},{"level":2,"title":"部署整个环境","slug":"部署整个环境"},{"level":2,"title":"仅部署服务和主站前端","slug":"仅部署服务和主站前端"},{"level":2,"title":"仅部署服务","slug":"仅部署服务"}],"relativePath":"deploy/docker.md"}',p={},c=[l('<h1 id="一键式部署" tabindex="-1">一键式部署 <a class="header-anchor" href="#一键式部署" aria-hidden="true">#</a></h1><p>使用 Docker Compose 可以很容易的部署整个环境。</p><h2 id="准备" tabindex="-1">准备 <a class="header-anchor" href="#准备" aria-hidden="true">#</a></h2><p>开始之前，你需要安装完成 Docker 和 docker compose。你还需要已安装 NodeJS 和 zx。</p><h2 id="zx安装" tabindex="-1">zx安装 <a class="header-anchor" href="#zx安装" aria-hidden="true">#</a></h2><div class="language-bash"><pre class="shiki shiki-dark" style="background-color:#121212;"><code><span class="line"><span style="color:#DBD7CA;">npm install -g zx </span></span>\n<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#393A34;">npm install -g zx </span></span>\n<span class="line"></span></code></pre></div><p>然后克隆仓库。</p><div class="language-bash"><pre class="shiki shiki-dark" style="background-color:#121212;"><code><span class="line"><span style="color:#DBD7CA;">git clone https://github.com/mx-space/docker --depth=1</span></span>\n<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#393A34;">git clone https://github.com/mx-space/docker --depth=1</span></span>\n<span class="line"></span></code></pre></div><h2 id="部署整个环境" tabindex="-1">部署整个环境 <a class="header-anchor" href="#部署整个环境" aria-hidden="true">#</a></h2><p>整个环境：kami + mx-server + caddy2</p><p>在此之前，你需要把域名指向当前服务器 IP。</p><div class="language-bash"><pre class="shiki shiki-dark" style="background-color:#121212;"><code><span class="line"><span style="color:#E0A569;">cd</span><span style="color:#DBD7CA;"> docker</span></span>\n<span class="line"><span style="color:#DBD7CA;">npm install</span></span>\n<span class="line"><span style="color:#DBD7CA;">zx ./build.mjs</span></span>\n<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#B58451;">cd</span><span style="color:#393A34;"> docker</span></span>\n<span class="line"><span style="color:#393A34;">npm install</span></span>\n<span class="line"><span style="color:#393A34;">zx ./build.mjs</span></span>\n<span class="line"></span></code></pre></div><p>实例输入：</p><div class="language-"><pre class="shiki shiki-dark" style="background-color:#121212;"><code><span class="line"><span style="color:#dbd7ca;">你的域名为：（需要提前绑定）: innei.ren</span></span>\n<span class="line"><span style="color:#dbd7ca;">你的邮箱为: (此步留空，则不部署 Caddy 服务): tukon@gmail.com</span></span>\n<span class="line"><span style="color:#dbd7ca;">是否部署 Caddy 2.0？ (y/n): y</span></span>\n<span class="line"><span style="color:#dbd7ca;"></span></span></code></pre><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#393a34;">你的域名为：（需要提前绑定）: innei.ren</span></span>\n<span class="line"><span style="color:#393a34;">你的邮箱为: (此步留空，则不部署 Caddy 服务): tukon@gmail.com</span></span>\n<span class="line"><span style="color:#393a34;">是否部署 Caddy 2.0？ (y/n): y</span></span>\n<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>待流程执行完毕，进入 <code>https://你的域名/proxy/qaqdmin</code></p><h2 id="仅部署服务和主站前端" tabindex="-1">仅部署服务和主站前端 <a class="header-anchor" href="#仅部署服务和主站前端" aria-hidden="true">#</a></h2><p>部署的环境：kami + mx-server</p><p>你不需要 IP 指向。但是需要手动处理服务器反代。</p><div class="language-bash"><pre class="shiki shiki-dark" style="background-color:#121212;"><code><span class="line"><span style="color:#E0A569;">cd</span><span style="color:#DBD7CA;"> docker</span></span>\n<span class="line"><span style="color:#DBD7CA;">npm install</span></span>\n<span class="line"><span style="color:#DBD7CA;">zx ./build.mjs</span></span>\n<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#B58451;">cd</span><span style="color:#393A34;"> docker</span></span>\n<span class="line"><span style="color:#393A34;">npm install</span></span>\n<span class="line"><span style="color:#393A34;">zx ./build.mjs</span></span>\n<span class="line"></span></code></pre></div><p>实例输入：</p><div class="language-"><pre class="shiki shiki-dark" style="background-color:#121212;"><code><span class="line"><span style="color:#dbd7ca;">你的域名为：（需要提前绑定）: innei.ren</span></span>\n<span class="line"><span style="color:#dbd7ca;">你的邮箱为: (此步留空，则不部署 Caddy 服务):</span></span>\n<span class="line"><span style="color:#dbd7ca;"></span></span></code></pre><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#393a34;">你的域名为：（需要提前绑定）: innei.ren</span></span>\n<span class="line"><span style="color:#393a34;">你的邮箱为: (此步留空，则不部署 Caddy 服务):</span></span>\n<span class="line"><span style="color:#393a34;"></span></span></code></pre></div><p>待流程执行完毕，进入 127.0.0.1:2333/proxy/qaqdmin。</p><h2 id="仅部署服务" tabindex="-1">仅部署服务 <a class="header-anchor" href="#仅部署服务" aria-hidden="true">#</a></h2><div class="language-bash"><pre class="shiki shiki-dark" style="background-color:#121212;"><code><span class="line"><span style="color:#DBD7CA;">wget https://cdn.jsdelivr.net/gh/mx-space/mx-server@master/docker-compose.yml</span></span>\n<span class="line"><span style="color:#DBD7CA;">docker-compose up -d</span></span>\n<span class="line"></span></code></pre><pre class="shiki shiki-light" style="background-color:#ffffff;"><code><span class="line"><span style="color:#393A34;">wget https://cdn.jsdelivr.net/gh/mx-space/mx-server@master/docker-compose.yml</span></span>\n<span class="line"><span style="color:#393A34;">docker-compose up -d</span></span>\n<span class="line"></span></code></pre></div><p>待流程执行完毕，进入 127.0.0.1:2333/proxy/qaqdmin。</p>',25)];var o=s(p,[["render",function(s,l,e,p,o,i){return n(),a("div",null,c)}]]);export{e as __pageData,o as default};
